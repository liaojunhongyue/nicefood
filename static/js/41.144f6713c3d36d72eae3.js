webpackJsonp([41],{BAnq:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("TC6A"),a=e("suVo"),n={components:{"f-normal-header":i.a,toast:a.a},data:function(){return{menuData:"",menuIndex:"",menuDetails:"",menuAuthor:"",isLiked:!1,isLikedShow:!1,isLikedActive:!1,toast:"",isShareShow:!1,promptCallback:""}},mounted:function(){var t=this;this.http.get(this.api.query.menuData.url).then(function(s){var e=s.data,i=e.code,a=e.data;0===i?(t.menuData=a,t.menuIndex=t.$route.params.id-1,t.menuDetails=t.menuData[t.menuIndex],t.menuAuthor=t.menuDetails.author,t.judgeLikedState()):t.Toast.fail("数据异常")})},methods:{likeMenu:function(){var t=this;this.isLiked?(this.promptCallback="已取消收藏",this.isLikedActive=!1,this.isLiked=!1,this.isLikedShow=!0,setTimeout(function(){t.isLikedShow=!1},1500),this.removeSessionLiked(this.menuDetails.id)):(this.promptCallback="收藏成功，请前往收藏夹查看",this.isLikedActive=!0,this.isLiked=!0,this.isLikedShow=!0,setTimeout(function(){t.isLikedShow=!1},1500),this.saveSessionLiked(this.menuDetails.id))},shareMenuShow:function(){this.isShareShow=!0},shareMenuHide:function(){this.isShareShow=!1},saveSessionLiked:function(t){var s=sessionStorage.getItem("likeMenuIds");s+=t,sessionStorage.setItem("likeMenuIds",s),console.log()},removeSessionLiked:function(t){var s=sessionStorage.getItem("likeMenuIds").replace(t,"");sessionStorage.setItem("likeMenuIds",s)},judgeLikedState:function(){var t=sessionStorage.getItem("likeMenuIds");t&&-1!==t.indexOf(this.menuDetails.id)&&(this.isLikedActive=!0,this.isLiked=!0)}}},r={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"food-details"},[e("f-normal-header",{attrs:{message:t.menuDetails.title,historyurl:""}}),t._v(" "),e("div",{staticClass:"pic"},[e("img",{attrs:{src:t.menuDetails.image}})]),t._v(" "),e("div",{staticClass:"food-title"},[e("p",{staticClass:"title"},[t._v(t._s(t.menuDetails.title))]),t._v(" "),e("p",[e("span",[t._v(t._s(t.menuDetails.like)+"人收藏")]),t._v(" "),e("span",[t._v(t._s(t.menuDetails.browse)+"次浏览")])])]),t._v(" "),e("div",{staticClass:"food-author"},[e("div",{staticClass:"avatar"},[e("img",{attrs:{src:t.menuAuthor.avatar}})]),t._v(" "),e("div",{staticClass:"info"},[e("p",[t._v(t._s(t.menuAuthor.name))]),t._v(" "),e("p",{staticClass:"menu-number"},[t._v(t._s(t.menuAuthor.desc))])]),t._v(" "),t._m(0)]),t._v(" "),e("div",{staticClass:"food-point"},[e("p",[e("span",[t._v("评分")]),t._v(" "),t._l(t.menuDetails.star,function(t,s){return e("i",{key:s,staticClass:"fa fa-star",attrs:{"aria-hidden":"true"}})})],2)]),t._v(" "),e("div",{staticClass:"food-footer"},[e("router-link",{staticClass:"food-footer-list",attrs:{to:{name:"menucomment",params:{commentid:t.menuDetails.id}}}},[e("i",{staticClass:"fa fa-commenting-o",attrs:{"aria-hidden":"true"}})]),t._v(" "),e("div",{staticClass:"food-footer-list",on:{click:t.likeMenu}},[e("i",{staticClass:"fa fa-heart",class:{active:t.isLikedActive},attrs:{"aria-hidden":"true"}})]),t._v(" "),e("div",{staticClass:"food-footer-list",on:{click:t.shareMenuShow}},[e("i",{staticClass:"fa fa-share-square-o",attrs:{"aria-hidden":"true"}})])],1),t._v(" "),e("toast",{directives:[{name:"show",rawName:"v-show",value:t.isLikedShow,expression:"isLikedShow"}],attrs:{prompttext:t.promptCallback}}),t._v(" "),e("transition",{attrs:{name:"prompt"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShareShow,expression:"isShareShow"}],staticClass:"menu-share"},[e("div",{staticClass:"menu-share-content"},[e("p",{staticClass:"menu-share-title"},[t._v("好内容就应该与朋友分享")]),t._v(" "),e("ul",{staticClass:"menu-share-list"},[e("li",{staticClass:"menu-share-item"},[e("i",{staticClass:"fa fa-file",attrs:{"aria-hidden":"true"}}),t._v(" "),e("p",[t._v("菜谱整图分享")])]),t._v(" "),e("li",{staticClass:"menu-share-item"},[e("i",{staticClass:"fa fa-weixin",attrs:{"aria-hidden":"true"}}),t._v(" "),e("p",[t._v("微信好友")])]),t._v(" "),e("li",{staticClass:"menu-share-item"},[e("i",{staticClass:"fa fa-qq",attrs:{"aria-hidden":"true"}}),t._v(" "),e("p",[t._v("QQ好友")])]),t._v(" "),e("li",{staticClass:"menu-share-item"},[e("i",{staticClass:"fa fa-weibo",attrs:{"aria-hidden":"true"}}),t._v(" "),e("p",[t._v("新浪微博")])]),t._v(" "),e("li",{staticClass:"menu-share-item"},[e("i",{staticClass:"fa fa-files-o",attrs:{"aria-hidden":"true"}}),t._v(" "),e("p",[t._v("复制链接")])])])]),t._v(" "),e("div",{staticClass:"menu-share-close"},[e("div",{staticClass:"close-icon",on:{click:t.shareMenuHide}},[e("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"follow-author"},[s("p",[this._v("关注")])])}]};var o=e("C7Lr")(n,r,!1,function(t){e("uvix")},null,null);s.default=o.exports},uvix:function(t,s){}});
//# sourceMappingURL=41.144f6713c3d36d72eae3.js.map